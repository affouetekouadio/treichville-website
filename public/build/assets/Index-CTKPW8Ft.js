import{c as K,u as X,U as F,r as Y,j as e,L as H}from"./app-utgbfNX0.js";import{B as $}from"./badge-NHEWw4q8.js";import{B as A}from"./button-Diin00ly.js";import{I as Z}from"./input-Dk6hpTUX.js";import{L as ee}from"./frontend-layout-C51i_DnW.js";import{P as te}from"./PageBanner-DBcIwO4M.js";import{e as Q,s as B}from"./utils-8z6MSKtL.js";import{L as se,l as q}from"./listing-BgDoC534.js";import{m as S}from"./proxy-C2tPMP2D.js";import{S as ae}from"./sparkles-KUIpNWGl.js";import{T as G}from"./tag-C7YTYvmc.js";import{C as k}from"./calendar-xEzYWlrR.js";import{C as re}from"./clock-9Lgf0m9H.js";import{b as le,a as ie}from"./NotificationContainer-CfokcVx5.js";import{S as oe}from"./search-B9ThFqgd.js";import{f as _,a as M}from"./fr-C-sNEScz.js";/* empty css            */import"./utils-LNTPob9H.js";import"./phone-BNNvaBlU.js";const ce=()=>{const t=K.c(18),{props:l,url:O}=X(),T=O.split("?")[0],D=l.evenements??[],I=l.categories??[],o=l.pagination??{page:1,per_page:12,total:D.length,last_page:1};let d;t[0]!==l.filters?(d=l.filters??{},t[0]=l.filters,t[1]=d):d=t[1];const a=d;let g;t[2]!==a.category?(g=a.category&&a.category.trim()!==""?a.category:"Toutes",t[2]=a.category,t[3]=g):g=t[3];const[c,P]=F.useState(g),[n,L]=F.useState(a.search??""),C=D.map(ne),W=["Toutes",...I.length?I.map(me):Array.from(new Set(C.map(de).filter(Boolean)))];let x,h;t[4]!==a.category||t[5]!==a.search?(x=()=>{P(a.category&&a.category.trim()!==""?a.category:"Toutes"),L(a.search??"")},h=[a.category,a.search],t[4]=a.category,t[5]=a.search,t[6]=x,t[7]=h):(x=t[6],h=t[7]),Y.useEffect(x,h);const z=s=>{const r=s===void 0?c:s,m=!r||r==="Toutes"?"":r;q(T,{search:n.trim(),category:m,page:1,per_page:o.per_page})};let p;t[8]===Symbol.for("react.memo_cache_sentinel")?(p={Culturel:"bg-purple-600",Sportif:"bg-green-600",Familial:"bg-blue-600",Citoyen:"bg-orange-600",Festif:"bg-pink-600",Social:"bg-[#03800a]"},t[8]=p):p=t[8];const R=p;let i;t[9]===Symbol.for("react.memo_cache_sentinel")?(i=new Date,i.setHours(0,0,0,0),t[9]=i):i=t[9];let f;t[10]===Symbol.for("react.memo_cache_sentinel")?(f=s=>new Date(s.date_debut)>=i,t[10]=f):f=t[10];const J=C.filter(f);let u;t[11]===Symbol.for("react.memo_cache_sentinel")?(u=s=>new Date(s.date_debut)<i,t[11]=u):u=t[11];const U=C.filter(u),V=J;let y;t[12]===Symbol.for("react.memo_cache_sentinel")?(y=e.jsx(te,{title:"Événements",variant:"compact"}),t[12]=y):y=t[12];let b;t[13]===Symbol.for("react.memo_cache_sentinel")?(b=e.jsx(oe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t[13]=b):b=t[13];let j;t[14]===Symbol.for("react.memo_cache_sentinel")?(j=s=>L(s.target.value),t[14]=j):j=t[14];let N;t[15]!==n?(N=e.jsxs("div",{className:"relative w-full lg:w-64",children:[b,e.jsx(Z,{placeholder:"Rechercher...",value:n,onChange:j,className:"pl-10"})]}),t[15]=n,t[16]=N):N=t[16];let w;return t[17]===Symbol.for("react.memo_cache_sentinel")?(w=e.jsx(A,{type:"submit",className:"bg-[var(--primary-orange)] hover:bg-orange-600",children:"Rechercher"}),t[17]=w):w=t[17],e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[y,e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-16",children:[e.jsx("form",{className:"bg-white rounded-xl p-6 shadow-lg mb-10",onSubmit:s=>{s.preventDefault(),z()},children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:W.map(s=>e.jsx(A,{variant:c===s?"default":"outline",size:"sm",type:"button",onClick:()=>{P(s),z(s)},className:c===s?"bg-[var(--primary-orange)] hover:bg-orange-600":"",children:s},s))}),N,w]})}),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-20",children:[e.jsxs(S.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ae,{className:"w-8 h-8 text-[#f8812f]"}),e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900",children:"Événements à venir"})]}),e.jsx("p",{className:"text-gray-600 ml-11",children:"Ne manquez pas ces prochains rendez-vous"})]}),V.length>0?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:V.map((s,r)=>{const m=R[s.categorie]||"bg-gray-600",v=new Date(s.date_debut),E=Q(s.slug??B(s.titre));return e.jsx(H,{href:E,className:"block",children:e.jsxs(S.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:r*.1},className:"group bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2",children:[e.jsxs("div",{className:"relative h-56 overflow-hidden",children:[s.image_url?e.jsx("img",{src:s.image_url,alt:s.titre,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gray-200 text-gray-400",children:e.jsx(G,{className:"h-8 w-8"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),s.gratuit&&e.jsx("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-semibold shadow-lg",children:"Gratuit"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx($,{className:`${m} text-white border-0 mb-3`,children:s.categorie}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3 group-hover:text-[#03800a] transition-colors",children:s.titre}),e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4 text-[#f8812f]"}),e.jsx("span",{className:"font-medium",children:_(v,"EEEE d MMMM yyyy",{locale:M})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4 text-[#f8812f]"}),e.jsx("span",{children:_(v,"HH:mm",{locale:M})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4 text-[#f8812f]"}),e.jsx("span",{children:s.lieu})]})]})]})]})},s.id)})}):e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl",children:[e.jsx(k,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Aucun événement à venir pour le moment"})]})]}),U.length>0&&e.jsxs("div",{children:[e.jsxs(S.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ie,{className:"w-8 h-8 text-gray-400"}),e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900",children:"Événements passés"})]}),e.jsx("p",{className:"text-gray-600 ml-11",children:"Revivez les moments forts de notre commune"})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:U.map((s,r)=>{const m=R[s.categorie]||"bg-gray-600",v=new Date(s.date_debut),E=Q(s.slug??B(s.titre));return e.jsx(H,{href:E,className:"block",children:e.jsxs(S.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:r*.1},className:"group bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[s.image_url?e.jsx("img",{src:s.image_url,alt:s.titre,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 opacity-90"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gray-200 text-gray-400",children:e.jsx(G,{className:"h-7 w-7"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-black/20"}),e.jsx("div",{className:"absolute top-4 right-4 bg-gray-600 text-white px-3 py-1 rounded-full text-xs font-semibold",children:"Terminé"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx($,{className:`${m} text-white border-0 mb-3 opacity-75`,children:s.categorie}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:s.titre}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{children:_(v,"d MMMM yyyy",{locale:M})})]})]})]})},s.id)})})]}),e.jsx(se,{page:o.page,lastPage:o.last_page,total:o.total,onPageChange:s=>q(T,{search:n.trim(),category:c==="Toutes"?"":c,page:s,per_page:o.per_page})})]})]})]})};ce.layout=t=>e.jsx(ee,{children:t});function ne(t){return{...t,slug:t.slug??B(t.titre)}}function me(t){return t.name}function de(t){return t.categorie}export{ce as default};
