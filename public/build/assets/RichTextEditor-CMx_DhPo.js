import{r as e,j as l}from"./app-C-8oMRr_.js";const m="https://cdn.ckeditor.com/ckeditor5/41.4.2/classic/ckeditor.js";function E({value:t,onChange:c,placeholder:o}){const i=e.useRef(null),n=e.useRef(null),u=e.useRef(t),[p,d]=e.useState(!1),a=e.useRef(c);return e.useEffect(()=>{a.current=c},[c]),e.useEffect(()=>{if(!window.ClassicEditor&&!document.querySelector(`script[src="${m}"]`)){const r=document.createElement("script");r.src=m,r.async=!0,r.onload=()=>s(),r.onerror=()=>d(!0),document.body.appendChild(r)}else window.ClassicEditor&&s();async function s(){if(!(!i.current||n.current||!window.ClassicEditor))try{const r=await window.ClassicEditor.create(i.current,{placeholder:o});n.current=r,r.setData(t||""),r.model.document.on("change:data",()=>{const f=r.getData();u.current=f,a.current(f)})}catch(r){console.error(r),d(!0)}}return()=>{n.current&&(n.current.destroy().catch(()=>{}),n.current=null)}},[o]),e.useEffect(()=>{n.current&&t!==u.current&&(n.current.setData(t||""),u.current=t)},[t]),p?l.jsx("textarea",{value:t,onChange:s=>c(s.target.value),placeholder:o,className:"mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-100",rows:5}):l.jsx("div",{ref:i,className:"prose prose-sm max-w-none rounded-lg border border-gray-200 bg-white px-3 py-2 shadow-inner"})}export{E as R};
