import{c as $,u as F,r as P,j as t,L as O}from"./app-BejPgazO.js";import{B as V}from"./badge-CK-Sui4e.js";import{I as q}from"./input-Ca2MgsPC.js";import{B as M}from"./button-D_KaEDOU.js";import{L as G}from"./frontend-layout-BZJTXjgO.js";import{P as H}from"./PageBanner-CgNSFNGD.js";import{a as J}from"./utils-8z6MSKtL.js";import{L as K,l as R}from"./listing-DCxo9Ai2.js";import{m as W}from"./proxy-Nl3f3XU2.js";import{T as U}from"./tag-CSUUepG9.js";import{C as X}from"./calendar-BgS6W7rR.js";import{S as Y}from"./search-p-ZM-y_1.js";import{f as Z,a as ee}from"./fr-C-sNEScz.js";/* empty css            */import"./utils-2I77NjtW.js";import"./NotificationContainer-CkKXAqu0.js";import"./clock-dTZJylhr.js";import"./phone-lgLD5imu.js";const te=()=>{const e=$.c(43),{props:i,url:A}=F();let h;e[0]!==A?(h=A.split("?"),e[0]=A,e[1]=h):h=e[1];const c=h[0],n=i.actualites??[],D=i.categories??[],s=i.pagination??{page:1,per_page:12,total:n.length,last_page:1};let d;e[2]!==i.filters?(d=i.filters??{},e[2]=i.filters,e[3]=d):d=e[3];const r=d;let x;e[4]!==r.category?(x=r.category&&r.category.trim()!==""?r.category:"Toutes",e[4]=r.category,e[5]=x):x=e[5];const[l,u]=P.useState(x),[o,m]=P.useState(r.search??""),[E]=P.useState(!1),z=["Toutes",...D.length?D.map(ae):Array.from(new Set(n.map(re).filter(Boolean)))];let y;e[6]===Symbol.for("react.memo_cache_sentinel")?(y={Annonce:"bg-blue-600",Événement:"bg-purple-600",Travaux:"bg-orange-600",Culture:"bg-pink-600",Social:"bg-green-600",Environnement:"bg-emerald-600"},e[6]=y):y=e[6];const I=y;let b;e[7]!==r.category||e[8]!==r.search||e[9]!==m||e[10]!==u?(b=()=>{u(r.category&&r.category.trim()!==""?r.category:"Toutes"),m(r.search??"")},e[7]=r.category,e[8]=r.search,e[9]=m,e[10]=u,e[11]=b):b=e[11];let j;e[12]!==r.category||e[13]!==r.search?(j=[r.category,r.search],e[12]=r.category,e[13]=r.search,e[14]=j):j=e[14],P.useEffect(b,j);let v;e[15]!==c||e[16]!==s.per_page||e[17]!==o||e[18]!==l?(v=a=>{const f=a===void 0?l:a,k=!f||f==="Toutes"?"":f;R(c,{search:o.trim(),category:k,page:1,per_page:s.per_page})},e[15]=c,e[16]=s.per_page,e[17]=o,e[18]=l,e[19]=v):v=e[19];const N=v;let w;e[20]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(H,{title:"Actualités",variant:"compact"}),e[20]=w):w=e[20];let C;e[21]!==N?(C=a=>{a.preventDefault(),N()},e[21]=N,e[22]=C):C=e[22];let S;e[23]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx(Y,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e[23]=S):S=e[23];let g;e[24]!==m?(g=a=>m(a.target.value),e[24]=m,e[25]=g):g=e[25];let _;e[26]!==o||e[27]!==g?(_=t.jsxs("div",{className:"relative w-full lg:w-64",children:[S,t.jsx(q,{placeholder:"Rechercher...",value:o,onChange:g,className:"pl-10"})]}),e[26]=o,e[27]=g,e[28]=_):_=e[28];let T;e[29]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx(M,{type:"submit",className:"bg-[var(--primary-orange)] hover:bg-orange-600",children:"Rechercher"}),e[29]=T):T=e[29];let L;e[30]!==n||e[31]!==E?(L=E?t.jsx("div",{className:"text-center py-12",children:"Chargement..."}):n.length>0?t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 items-stretch",children:n.map((a,f)=>{const k=I[a.categorie]||"bg-gray-600",Q=a.slug?J(a.slug):"#";return t.jsx(O,{href:Q,className:"block",children:t.jsxs(W.article,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:f*.05},className:"bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all group h-full flex flex-col",children:[t.jsxs("div",{className:"relative h-56 overflow-hidden bg-gray-200",children:[a.image_url?t.jsx("img",{src:a.image_url,alt:a.titre,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):t.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-800 to-gray-600 flex items-center justify-center",children:t.jsx(U,{className:"w-16 h-16 text-white/30"})}),t.jsx("div",{className:"absolute top-4 left-4",children:t.jsx(V,{className:`${k} text-white border-0`,children:a.categorie})})]}),t.jsxs("div",{className:"p-6 flex flex-col flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-3",children:[t.jsx(X,{className:"w-4 h-4"}),t.jsx("time",{children:Z(new Date(a.date_publication),"d MMMM yyyy",{locale:ee})})]}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3 group-hover:text-[#DC2626] transition-colors line-clamp-2",children:a.titre}),t.jsx("p",{className:"text-gray-600 line-clamp-3 flex-1",children:a.description})]})]})},a.id)})}):t.jsxs("div",{className:"text-center py-12 bg-white rounded-xl",children:[t.jsx(U,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500",children:"Aucune actualité trouvée"})]}),e[30]=n,e[31]=E,e[32]=L):L=e[32];let p;e[33]!==c||e[34]!==s.per_page||e[35]!==o||e[36]!==l?(p=a=>R(c,{search:o.trim(),category:l==="Toutes"?"":l,page:a,per_page:s.per_page}),e[33]=c,e[34]=s.per_page,e[35]=o,e[36]=l,e[37]=p):p=e[37];let B;return e[38]!==s.last_page||e[39]!==s.page||e[40]!==s.total||e[41]!==p?(B=t.jsx(K,{page:s.page,lastPage:s.last_page,total:s.total,onPageChange:p}),e[38]=s.last_page,e[39]=s.page,e[40]=s.total,e[41]=p,e[42]=B):B=e[42],t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[w,t.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-16",children:[t.jsx("form",{className:"bg-white rounded-xl p-6 shadow-lg mb-10",onSubmit:C,children:t.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[t.jsx("div",{className:"flex flex-wrap gap-2",children:z.map(a=>t.jsx(M,{variant:l===a?"default":"outline",size:"sm",type:"button",onClick:()=>{u(a),N(a)},className:l===a?"bg-[var(--primary-orange)] hover:bg-orange-600":"",children:a},a))}),_,T]})}),L,B]})]})};te.layout=e=>t.jsx(G,{children:e});function ae(e){return e.name}function re(e){return e.categorie}export{te as default};
