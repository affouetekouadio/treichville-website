import{c as k,u as H,r as O,j as t,H as R}from"./app-BejPgazO.js";import{L as V,l as D,a as $}from"./listing-DCxo9Ai2.js";import{L as K}from"./ListingToolbar-DvZGwr1n.js";import{A as U}from"./app-layout-BQ5qX7lL.js";import{u as q}from"./use-listing-search-DrzHuTUi.js";/* empty css            */import"./utils-2I77NjtW.js";import"./button-D_KaEDOU.js";import"./index-BN3lXh6S.js";import"./index-X2Zg3GXO.js";import"./NotificationContainer-CkKXAqu0.js";import"./proxy-Nl3f3XU2.js";import"./index-w_94M6Cx.js";import"./index-CMWG4mbA.js";import"./book-open-BPhHsoV0.js";import"./megaphone-Bzclr3yb.js";import"./landmark-DsboWya2.js";import"./tag-CSUUepG9.js";import"./users-BZbPHptc.js";import"./chevron-right-ChKHOGEP.js";const B=s=>{const e=k.c(49),{media:N,listing:n}=s;let v;e[0]!==N?(v=N===void 0?[]:N,e[0]=N,e[1]=v):v=e[1];const i=v,{url:F}=H();let S;e[2]!==F?(S=F.split("?"),e[2]=F,e[3]=S):S=e[3];const l=S[0],[p,z]=O.useState(n?.filters.search??""),c=n?.filters.sort??"created_at",x=n?.filters.direction??"desc";let P;e[4]!==n?.pagination||e[5]!==i.length?(P=n?.pagination??{page:1,per_page:15,total:i.length,last_page:1},e[4]=n?.pagination,e[5]=i.length,e[6]=P):P=e[6];const a=P;let L;e[7]!==a.per_page||e[8]!==p||e[9]!==x||e[10]!==c?(L={search:p,sort:c,direction:x,per_page:a.per_page},e[7]=a.per_page,e[8]=p,e[9]=x,e[10]=c,e[11]=L):L=e[11];const r=L;q(l,r);let C,T;e[12]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx(R,{title:"Médias"}),T=t.jsxs("div",{children:[t.jsx("p",{className:"text-sm uppercase tracking-wide text-gray-500",children:"Fichiers"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Médias & PDF"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Liste des fichiers envoyés (PDF du journal, images des pages)."})]}),e[12]=C,e[13]=T):(C=e[12],T=e[13]);let d;e[14]!==x||e[15]!==c?(d={value:c,direction:x},e[14]=x,e[15]=c,e[16]=d):d=e[16];let w;e[17]===Symbol.for("react.memo_cache_sentinel")?(w=[{value:"created_at",label:"Date creation"},{value:"title",label:"Titre"},{value:"collection",label:"Collection"},{value:"size",label:"Taille"}],e[17]=w):w=e[17];let m,g,h,f;e[18]!==r||e[19]!==l?(m=()=>D(l,{...r,page:1}),g=o=>D(l,{...r,per_page:o,page:1}),h=o=>$(l,r,o),f=(o,M)=>D(l,{...r,sort:o,direction:M}),e[18]=r,e[19]=l,e[20]=m,e[21]=g,e[22]=h,e[23]=f):(m=e[20],g=e[21],h=e[22],f=e[23]);let u;e[24]!==a.per_page||e[25]!==p||e[26]!==m||e[27]!==g||e[28]!==h||e[29]!==f||e[30]!==d?(u=t.jsx(K,{search:p,perPage:a.per_page,sort:d,sortOptions:w,onSearchChange:z,onSearchSubmit:m,onPerPageChange:g,onExport:h,onSortChange:f}),e[24]=a.per_page,e[25]=p,e[26]=m,e[27]=g,e[28]=h,e[29]=f,e[30]=d,e[31]=u):u=e[31];let E;e[32]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx("thead",{className:"bg-gray-50 text-left text-xs uppercase text-gray-500",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3",children:"Titre"}),t.jsx("th",{className:"px-4 py-3",children:"Collection"}),t.jsx("th",{className:"px-4 py-3",children:"Type"}),t.jsx("th",{className:"px-4 py-3",children:"Taille"}),t.jsx("th",{className:"px-4 py-3",children:"Lien"})]})}),e[32]=E):E=e[32];let j;e[33]!==i?(j=i.length?i.map(G):t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-gray-500",children:"Aucun fichier pour le moment."})}),e[33]=i,e[34]=j):j=e[34];let y;e[35]!==j?(y=t.jsx("div",{className:"rounded-xl border border-gray-200 bg-white p-0 shadow-sm",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full text-sm",children:[E,t.jsx("tbody",{children:j})]})})}),e[35]=j,e[36]=y):y=e[36];let _;e[37]!==r||e[38]!==l?(_=o=>D(l,{...r,page:o}),e[37]=r,e[38]=l,e[39]=_):_=e[39];let b;e[40]!==a.last_page||e[41]!==a.page||e[42]!==a.total||e[43]!==_?(b=t.jsx(V,{page:a.page,lastPage:a.last_page,total:a.total,onPageChange:_}),e[40]=a.last_page,e[41]=a.page,e[42]=a.total,e[43]=_,e[44]=b):b=e[44];let A;return e[45]!==u||e[46]!==y||e[47]!==b?(A=t.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[C,T,u,y,b]}),e[45]=u,e[46]=y,e[47]=b,e[48]=A):A=e[48],A};B.layout=s=>t.jsx(U,{children:s});function G(s){return t.jsxs("tr",{className:"border-t",children:[t.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:s.title||"—"}),t.jsx("td",{className:"px-4 py-3 text-gray-700",children:s.collection||"default"}),t.jsx("td",{className:"px-4 py-3 text-gray-700",children:s.file_type||s.mime_type||"—"}),t.jsx("td",{className:"px-4 py-3 text-gray-700",children:s.size?`${(s.size/1024).toFixed(1)} Ko`:"—"}),t.jsx("td",{className:"px-4 py-3 text-blue-600",children:s.url?t.jsx("a",{href:s.url,target:"_blank",rel:"noreferrer",className:"underline",children:"Ouvrir"}):"—"})]},s.id)}export{B as default};
