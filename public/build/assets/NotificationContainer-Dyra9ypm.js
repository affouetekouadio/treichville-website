import{r,j as d,a as B,c as L}from"./app-C-8oMRr_.js";import{c as $,M as D,i as W,u as A,P as q,a as F,b as H,L as K,m as P}from"./proxy-DG17_Cau.js";const U=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],G=$("CircleCheckBig",U);const O=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],V=$("CircleX",O);const J=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Q=$("Info",J);const Y=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Z=$("TriangleAlert",Y);const ee=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],te=$("X",ee);function z(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function oe(...t){return e=>{let o=!1;const n=t.map(i=>{const s=z(i,e);return!o&&typeof s=="function"&&(o=!0),s});if(o)return()=>{for(let i=0;i<n.length;i++){const s=n[i];typeof s=="function"?s():z(t[i],null)}}}}function ne(...t){return r.useCallback(oe(...t),t)}class se extends r.Component{getSnapshotBeforeUpdate(e){const o=this.props.childRef.current;if(o&&e.isPresent&&!this.props.isPresent){const n=o.offsetParent,i=W(n)&&n.offsetWidth||0,s=this.props.sizeRef.current;s.height=o.offsetHeight||0,s.width=o.offsetWidth||0,s.top=o.offsetTop,s.left=o.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function re({children:t,isPresent:e,anchorX:o,root:n}){const i=r.useId(),s=r.useRef(null),h=r.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:g}=r.useContext(D),f=ne(s,t?.ref);return r.useInsertionEffect(()=>{const{width:c,height:C,top:l,left:a,right:p}=h.current;if(e||!s.current||!c||!C)return;const b=o==="left"?`left: ${a}`:`right: ${p}`;s.current.dataset.motionPopId=i;const u=document.createElement("style");g&&(u.nonce=g);const v=n??document.head;return v.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${C}px !important;
            ${b}px !important;
            top: ${l}px !important;
          }
        `),()=>{v.contains(u)&&v.removeChild(u)}},[e]),d.jsx(se,{isPresent:e,childRef:s,sizeRef:h,children:r.cloneElement(t,{ref:f})})}const ie=({children:t,initial:e,isPresent:o,onExitComplete:n,custom:i,presenceAffectsLayout:s,mode:h,anchorX:g,root:f})=>{const c=A(ce),C=r.useId();let l=!0,a=r.useMemo(()=>(l=!1,{id:C,initial:e,isPresent:o,custom:i,onExitComplete:p=>{c.set(p,!0);for(const b of c.values())if(!b)return;n&&n()},register:p=>(c.set(p,!1),()=>c.delete(p))}),[o,c,n]);return s&&l&&(a={...a}),r.useMemo(()=>{c.forEach((p,b)=>c.set(b,!1))},[o]),r.useEffect(()=>{!o&&!c.size&&n&&n()},[o]),h==="popLayout"&&(t=d.jsx(re,{isPresent:o,anchorX:g,root:f,children:t})),d.jsx(q.Provider,{value:a,children:t})};function ce(){return new Map}const M=t=>t.key||"";function I(t){const e=[];return r.Children.forEach(t,o=>{r.isValidElement(o)&&e.push(o)}),e}const le=({children:t,custom:e,initial:o=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:s="sync",propagate:h=!1,anchorX:g="left",root:f})=>{const[c,C]=F(h),l=r.useMemo(()=>I(t),[t]),a=h&&!c?[]:l.map(M),p=r.useRef(!0),b=r.useRef(l),u=A(()=>new Map),[v,w]=r.useState(l),[x,j]=r.useState(l);H(()=>{p.current=!1,b.current=l;for(let m=0;m<x.length;m++){const y=M(x[m]);a.includes(y)?u.delete(y):u.get(y)!==!0&&u.set(y,!1)}},[x,a.length,a.join("-")]);const k=[];if(l!==v){let m=[...l];for(let y=0;y<x.length;y++){const R=x[y],E=M(R);a.includes(E)||(m.splice(y,0,R),k.push(R))}return s==="wait"&&k.length&&(m=k),j(I(m)),w(l),null}const{forceRender:N}=r.useContext(K);return d.jsx(d.Fragment,{children:x.map(m=>{const y=M(m),R=h&&!c?!1:l===x||a.includes(y),E=()=>{if(u.has(y))u.set(y,!0);else return;let _=!0;u.forEach(X=>{X||(_=!1)}),_&&(N?.(),j(b.current),h&&C?.(),n&&n())};return d.jsx(ie,{isPresent:R,initial:!p.current||o?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:f,onExitComplete:R?void 0:E,anchorX:g,children:m},y)})})},S=r.createContext(void 0);function pe({children:t}){const[e,o]=r.useState([]),{props:n}=B(),i=r.useCallback((g,f,c=5e3)=>{const C=`${Date.now()}-${Math.random()}`,l={id:C,type:g,message:f,duration:c};o(a=>[...a,l]),c>0&&setTimeout(()=>{s(C)},c)},[]),s=r.useCallback(g=>{o(f=>f.filter(c=>c.id!==g))},[]),h=r.useCallback(()=>{o([])},[]);return r.useEffect(()=>{n.flash?.success&&i("success",n.flash.success),n.flash?.error&&i("error",n.flash.error),n.flash?.warning&&i("warning",n.flash.warning),n.flash?.info&&i("info",n.flash.info)},[n.flash,i]),d.jsx(S.Provider,{value:{notifications:e,addNotification:i,removeNotification:s,clearAll:h},children:t})}function T(){const t=r.useContext(S);if(t===void 0)throw new Error("useNotification doit être utilisé à l'intérieur d'un NotificationProvider");return t}const ae={success:{icon:G,bgColor:"bg-green-50",borderColor:"border-green-200",iconColor:"text-green-600",progressColor:"bg-green-500"},error:{icon:V,bgColor:"bg-red-50",borderColor:"border-red-200",iconColor:"text-red-600",progressColor:"bg-red-500"},warning:{icon:Z,bgColor:"bg-orange-50",borderColor:"border-orange-200",iconColor:"text-orange-600",progressColor:"bg-orange-500"},info:{icon:Q,bgColor:"bg-blue-50",borderColor:"border-blue-200",iconColor:"text-blue-600",progressColor:"bg-blue-500"}};function fe(t){const e=L.c(24),{id:o,type:n,message:i,duration:s}=t,h=s===void 0?5e3:s,{removeNotification:g}=T(),f=ae[n],c=f.icon;let C,l,a,p;e[0]===Symbol.for("react.memo_cache_sentinel")?(C={opacity:0,y:-20,scale:.95},l={opacity:1,y:0,scale:1},a={opacity:0,x:100,scale:.95},p={duration:.3,ease:"easeOut"},e[0]=C,e[1]=l,e[2]=a,e[3]=p):(C=e[0],l=e[1],a=e[2],p=e[3]);const b=`relative flex items-start gap-3 p-4 rounded-lg border shadow-lg ${f.bgColor} ${f.borderColor} min-w-[320px] max-w-md overflow-hidden`,u=`w-5 h-5 ${f.iconColor} flex-shrink-0 mt-0.5`;let v;e[4]!==c||e[5]!==u?(v=d.jsx(c,{className:u}),e[4]=c,e[5]=u,e[6]=v):v=e[6];let w;e[7]!==i?(w=d.jsx("div",{className:"flex-1 text-sm text-gray-800 font-medium pr-2",children:i}),e[7]=i,e[8]=w):w=e[8];let x;e[9]!==o||e[10]!==g?(x=()=>g(o),e[9]=o,e[10]=g,e[11]=x):x=e[11];let j;e[12]===Symbol.for("react.memo_cache_sentinel")?(j=d.jsx(te,{className:"w-4 h-4"}),e[12]=j):j=e[12];let k;e[13]!==x?(k=d.jsx("button",{onClick:x,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Fermer la notification",children:j}),e[13]=x,e[14]=k):k=e[14];let N;e[15]!==f.progressColor||e[16]!==h?(N=h>0&&d.jsx(P.div,{initial:{width:"100%"},animate:{width:"0%"},transition:{duration:h/1e3,ease:"linear"},className:`absolute bottom-0 left-0 h-1 ${f.progressColor}`}),e[15]=f.progressColor,e[16]=h,e[17]=N):N=e[17];let m;return e[18]!==k||e[19]!==N||e[20]!==b||e[21]!==v||e[22]!==w?(m=d.jsxs(P.div,{layout:!0,initial:C,animate:l,exit:a,transition:p,className:b,children:[v,w,k,N]}),e[18]=k,e[19]=N,e[20]=b,e[21]=v,e[22]=w,e[23]=m):m=e[23],m}function me(){const t=L.c(4),{notifications:e}=T();let o;t[0]!==e?(o=e.map(ue),t[0]=e,t[1]=o):o=t[1];let n;return t[2]!==o?(n=d.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:d.jsx(le,{mode:"popLayout",children:o})}),t[2]=o,t[3]=n):n=t[3],n}function ue(t){return d.jsx("div",{className:"pointer-events-auto",children:d.jsx(fe,{id:t.id,type:t.type,message:t.message,duration:t.duration})},t.id)}export{le as A,G as C,pe as N,te as X,me as a};
