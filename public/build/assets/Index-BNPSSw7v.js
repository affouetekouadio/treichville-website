import{r as a,j as e,H as y}from"./app-Dt7RuvZJ.js";import{A as j}from"./app-layout-CDHZc0iB.js";import{P as b}from"./plus-eH69TIOW.js";import{X as N}from"./NotificationContainer-CTXYxmtc.js";/* empty css            */import"./utils-B_eCRiuR.js";import"./button-C1KOq0LB.js";import"./index-CyM1ERZV.js";import"./index-BTe_yMI_.js";import"./proxy-CvMQ_CUX.js";import"./index-2yvp8cuD.js";import"./index-CMWG4mbA.js";import"./megaphone-j6sGbgaP.js";import"./tag-gBy1bOOH.js";import"./book-open-2cfZ-n7i.js";import"./chevron-right-C4oXrUTZ.js";const v=()=>{const[l,c]=a.useState([]),[x,p]=a.useState(!0),[u,n]=a.useState(!1),[d,m]=a.useState(!1),[r,i]=a.useState({name:"",type:"actualite"});a.useEffect(()=>{(async()=>{try{const o=await(await fetch("/admin/api/categories")).json();c(o.data||[])}catch(s){console.error(s)}finally{p(!1)}})()},[]);const h=async t=>{t.preventDefault(),m(!0);try{const s=document.querySelector('meta[name="csrf-token"]')?.content??"",o=await fetch("/admin/api/categories",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":s},credentials:"same-origin",body:JSON.stringify(r)});if(!o.ok)throw new Error("Erreur création catégorie");const g=await o.json();c(f=>[g.data,...f]),n(!1),i({name:"",type:"actualite"})}catch(s){console.error(s),alert("Impossible de créer la catégorie.")}finally{m(!1)}};return e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsx(y,{title:"Catégories"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm uppercase tracking-wide text-gray-500",children:"Classification"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Catégories"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Gérez les catégories pour les actualités et les événements."})]}),e.jsxs("button",{onClick:()=>n(!0),className:"inline-flex items-center gap-2 rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-slate-800",children:[e.jsx(b,{className:"h-4 w-4"}),"Nouvelle catégorie"]})]}),e.jsx("div",{className:"rounded-xl border border-gray-200 bg-white p-0 shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 text-left text-xs uppercase text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Nom"}),e.jsx("th",{className:"px-4 py-3",children:"Type"})]})}),e.jsx("tbody",{children:x?e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"px-4 py-4 text-center text-gray-500",children:"Chargement..."})}):l.length?l.map(t=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-4 py-3 text-gray-700",children:t.type==="actualite"?"Actualité":"Événement"})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"px-4 py-6 text-center text-gray-500",children:"Aucune catégorie pour le moment."})})})]})})}),u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between border-b px-6 py-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Nouvelle catégorie"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Ajouter"})]}),e.jsx("button",{className:"rounded-full p-2 text-gray-500 hover:bg-gray-100",onClick:()=>n(!1),children:e.jsx(N,{className:"h-5 w-5"})})]}),e.jsxs("form",{className:"space-y-4 px-6 py-5",onSubmit:h,children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Nom *"}),e.jsx("input",{required:!0,value:r.name,onChange:t=>i({...r,name:t.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 focus:border-slate-900 focus:outline-none focus:ring-2 focus:ring-slate-200",placeholder:"Ex: Institutionnel, Culture..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Type *"}),e.jsxs("select",{value:r.type,onChange:t=>i({...r,type:t.target.value}),className:"mt-1 w-full rounded-lg border border-gray-200 px-3 py-2 focus:border-slate-900 focus:outline-none focus:ring-2 focus:ring-slate-200",children:[e.jsx("option",{value:"actualite",children:"Actualité"}),e.jsx("option",{value:"evenement",children:"Événement"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t pt-4",children:[e.jsx("button",{type:"button",className:"rounded-lg px-4 py-2 text-sm font-semibold text-gray-600 hover:bg-gray-100",onClick:()=>n(!1),children:"Annuler"}),e.jsx("button",{type:"submit",disabled:d,className:"rounded-lg bg-slate-900 px-5 py-2 text-sm font-semibold text-white shadow-sm hover:bg-slate-800 disabled:opacity-60",children:d?"Enregistrement...":"Enregistrer"})]})]})]})})]})};v.layout=l=>e.jsx(j,{children:l});export{v as default};
