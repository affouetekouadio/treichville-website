import{c as pe,u as he,r as le,j as t}from"./app-BXbEp5Qj.js";import{L as xe}from"./frontend-layout-Lu6pWH8O.js";import{P as ue}from"./PageBanner-qHxWEmSM.js";import{L as ge,l as ce}from"./listing-Bweg6fvT.js";import{m as be}from"./proxy-DCAQc30f.js";import{F as me}from"./file-text-uRI-jWbD.js";import{C as ye}from"./calendar-Dj8vivQg.js";import{D as je}from"./download-6IAEQ3sE.js";/* empty css            */import"./utils-8z6MSKtL.js";import"./NotificationContainer-dFE-BGR3.js";import"./clock-ETidUMNy.js";import"./phone-DvmghDv0.js";const ve=()=>{const e=pe.c(86),{props:a,url:re}=he();let w;e[0]!==re?(w=re.split("?"),e[0]=re,e[1]=w):w=e[1];const d=w[0];let S;e[2]!==a.editions?(S=a.editions??[],e[2]=a.editions,e[3]=S):S=e[3];const c=S;let F;e[4]!==a.filters?(F=a.filters??{},e[4]=a.filters,e[5]=F):F=e[5];const l=F;let D;e[6]!==c.length||e[7]!==a.pagination?(D=a.pagination??{page:1,per_page:12,total:c.length,last_page:1},e[6]=c.length,e[7]=a.pagination,e[8]=D):D=e[8];const i=D;let P;e[9]!==a.available_years?(P=a.available_years??[],e[9]=a.available_years,e[10]=P):P=e[10];const se=P,[m,ie]=le.useState(l.search??""),[o,oe]=le.useState(l.year?l.year:"all"),[n,ne]=le.useState(l.month?l.month:"all"),de=_e;let T,C;e[11]!==l.month||e[12]!==l.search||e[13]!==l.year?(T=()=>{ie(l.search??""),oe(l.year?l.year:"all"),ne(l.month?l.month:"all")},C=[l.month,l.search,l.year],e[11]=l.month,e[12]=l.search,e[13]=l.year,e[14]=T,e[15]=C):(T=e[14],C=e[15]),le.useEffect(T,C);let L;e[16]!==d||e[17]!==n||e[18]!==i.per_page||e[19]!==m||e[20]!==o?(L=()=>{const r=o==="all"?"":o,s=n==="all"?"":n;ce(d,{search:m.trim(),year:r,month:s,page:1,per_page:i.per_page})},e[16]=d,e[17]=n,e[18]=i.per_page,e[19]=m,e[20]=o,e[21]=L):L=e[21];const ae=L;let k;e[22]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(ue,{title:"Journal municipal",variant:"compact"}),e[22]=k):k=e[22];let A;e[23]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx("div",{className:"bg-white border border-amber-100 text-amber-800 rounded-xl p-4 text-sm font-medium",children:"Téléchargement direct : chaque édition est hébergée sur le site de la mairie et peut être consultée hors ligne."}),e[23]=A):A=e[23];let f;e[24]!==ae?(f=r=>{r.preventDefault(),ae()},e[24]=ae,e[25]=f):f=e[25];let J;e[26]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Recherche"}),e[26]=J):J=e[26];let M;e[27]===Symbol.for("react.memo_cache_sentinel")?(M=r=>ie(r.target.value),e[27]=M):M=e[27];let p;e[28]!==m?(p=t.jsxs("div",{children:[J,t.jsx("input",{value:m,onChange:M,placeholder:"Titre ou description",className:"mt-2 w-full rounded-xl border border-gray-200 px-4 py-3 text-sm focus:border-[#f8812f] focus:outline-none focus:ring-2 focus:ring-[#f8812f]/20"})]}),e[28]=m,e[29]=p):p=e[29];let E;e[30]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Année"}),e[30]=E):E=e[30];let R;e[31]===Symbol.for("react.memo_cache_sentinel")?(R=r=>oe(r.target.value),e[31]=R):R=e[31];let z;e[32]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx("option",{value:"all",children:"Toutes"}),e[32]=z):z=e[32];let h;e[33]!==se?(h=se.map(Ne),e[33]=se,e[34]=h):h=e[34];let x;e[35]!==h||e[36]!==o?(x=t.jsxs("div",{children:[E,t.jsxs("select",{value:o,onChange:R,className:"mt-2 w-full rounded-xl border border-gray-200 px-4 py-3 text-sm bg-white focus:border-[#f8812f] focus:outline-none focus:ring-2 focus:ring-[#f8812f]/20",children:[z,h]})]}),e[35]=h,e[36]=o,e[37]=x):x=e[37];let Y;e[38]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Mois"}),e[38]=Y):Y=e[38];let q;e[39]===Symbol.for("react.memo_cache_sentinel")?(q=r=>ne(r.target.value),e[39]=q):q=e[39];let V,B,I,O,U,$,G,H,K,Q,W,X,Z;e[40]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx("option",{value:"all",children:"Tous"}),B=t.jsx("option",{value:"01",children:"Janvier"}),I=t.jsx("option",{value:"02",children:"Février"}),O=t.jsx("option",{value:"03",children:"Mars"}),U=t.jsx("option",{value:"04",children:"Avril"}),$=t.jsx("option",{value:"05",children:"Mai"}),G=t.jsx("option",{value:"06",children:"Juin"}),H=t.jsx("option",{value:"07",children:"Juillet"}),K=t.jsx("option",{value:"08",children:"Août"}),Q=t.jsx("option",{value:"09",children:"Septembre"}),W=t.jsx("option",{value:"10",children:"Octobre"}),X=t.jsx("option",{value:"11",children:"Novembre"}),Z=t.jsx("option",{value:"12",children:"Décembre"}),e[40]=V,e[41]=B,e[42]=I,e[43]=O,e[44]=U,e[45]=$,e[46]=G,e[47]=H,e[48]=K,e[49]=Q,e[50]=W,e[51]=X,e[52]=Z):(V=e[40],B=e[41],I=e[42],O=e[43],U=e[44],$=e[45],G=e[46],H=e[47],K=e[48],Q=e[49],W=e[50],X=e[51],Z=e[52]);let u;e[53]!==n?(u=t.jsxs("div",{children:[Y,t.jsxs("select",{value:n,onChange:q,className:"mt-2 w-full rounded-xl border border-gray-200 px-4 py-3 text-sm bg-white focus:border-[#f8812f] focus:outline-none focus:ring-2 focus:ring-[#f8812f]/20",children:[V,B,I,O,U,$,G,H,K,Q,W,X,Z]})]}),e[53]=n,e[54]=u):u=e[54];let g;e[55]!==p||e[56]!==x||e[57]!==u?(g=t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[p,x,u]}),e[55]=p,e[56]=x,e[57]=u,e[58]=g):g=e[58];let ee;e[59]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx("div",{className:"mt-4 flex items-center justify-end",children:t.jsx("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 rounded-xl bg-[#f8812f] px-4 py-2 text-sm font-semibold text-white hover:bg-orange-600 transition-colors",children:"Appliquer"})}),e[59]=ee):ee=e[59];let b;e[60]!==f||e[61]!==g?(b=t.jsxs("form",{className:"bg-white border border-gray-100 rounded-2xl p-4 md:p-5 shadow-sm",onSubmit:f,children:[g,ee]}),e[60]=f,e[61]=g,e[62]=b):b=e[62];let y;if(e[63]!==c){let r;e[65]===Symbol.for("react.memo_cache_sentinel")?(r=(s,fe)=>t.jsxs(be.div,{initial:{opacity:0,y:16},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:fe*.05},className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100 flex flex-col",children:[s.cover_image?t.jsx("div",{className:"mb-4 overflow-hidden rounded-xl border border-gray-100 bg-gray-50 flex items-center justify-center p-4",children:t.jsx("img",{src:s.cover_image,alt:s.title,className:"h-36 w-full object-contain"})}):t.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#f8812f]/15 text-[#f8812f] flex items-center justify-center mb-4",children:t.jsx(me,{className:"w-6 h-6"})}),t.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-2",children:s.title}),s.published_at&&t.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase tracking-wide text-gray-500 mb-2",children:[t.jsx(ye,{className:"w-4 h-4 text-[#f8812f]"}),t.jsxs("span",{children:["Publié le ",de(s.published_at)??s.published_at]})]}),t.jsx("p",{className:"text-sm text-gray-500 mb-2",children:s.size||"PDF"}),s.description&&t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:s.description}),t.jsxs("div",{className:"mt-auto grid gap-3",children:[t.jsxs("a",{href:s.url,className:"inline-flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-[#f8812f] text-[#f8812f] font-semibold hover:bg-[#f8812f]/10 transition-colors",target:"_blank",rel:"noreferrer",children:[t.jsx(me,{className:"w-4 h-4"}),"Lire en ligne"]}),t.jsxs("a",{href:s.download_url||s.url,className:"inline-flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-[#f8812f] text-white font-semibold hover:bg-orange-600 transition-colors",download:!0,children:[t.jsx(je,{className:"w-4 h-4"}),"Télécharger le PDF"]})]})]},s.id),e[65]=r):r=e[65],y=c.map(r),e[63]=c,e[64]=y}else y=e[64];let j;e[66]!==c.length?(j=!c.length&&t.jsx("div",{className:"md:col-span-3 rounded-2xl border border-dashed border-gray-200 bg-white p-10 text-center text-sm text-gray-500",children:"Aucune édition ne correspond à vos critères."}),e[66]=c.length,e[67]=j):j=e[67];let v;e[68]!==y||e[69]!==j?(v=t.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[y,j]}),e[68]=y,e[69]=j,e[70]=v):v=e[70];let _;e[71]!==d||e[72]!==n||e[73]!==i.per_page||e[74]!==m||e[75]!==o?(_=r=>ce(d,{search:m.trim(),year:o==="all"?"":o,month:n==="all"?"":n,page:r,per_page:i.per_page}),e[71]=d,e[72]=n,e[73]=i.per_page,e[74]=m,e[75]=o,e[76]=_):_=e[76];let N;e[77]!==i.last_page||e[78]!==i.page||e[79]!==i.total||e[80]!==_?(N=t.jsx(ge,{page:i.page,lastPage:i.last_page,total:i.total,onPageChange:_}),e[77]=i.last_page,e[78]=i.page,e[79]=i.total,e[80]=_,e[81]=N):N=e[81];let te;return e[82]!==b||e[83]!==v||e[84]!==N?(te=t.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[k,t.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12 space-y-8",children:[A,b,v,N]})]}),e[82]=b,e[83]=v,e[84]=N,e[85]=te):te=e[85],te};ve.layout=e=>t.jsx(xe,{children:e});function _e(e){if(!e)return null;const a=new Date(e);return Number.isNaN(a.getTime())?null:a.toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric"})}function Ne(e){return t.jsx("option",{value:e,children:e},e)}export{ve as default};
